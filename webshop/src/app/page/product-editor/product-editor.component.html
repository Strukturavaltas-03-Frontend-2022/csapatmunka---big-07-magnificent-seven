<!-- export class Product {
  [x: string]: any;
  id: number = 0;
  name: string = '';
  type: string = '';
  catID: number = 0;
  description: string = '';
  price: number = 0;
  featured: boolean = true;
  active: boolean = true;
} -->

<div class="row mt-3" *ngIf="product$ | async as product">
  <div class="col-12">
    <form
      #productEditorForm="ngForm"
      (ngSubmit)="onUpdate(product)"
      style="max-width: 300px"
      class="mx-auto"
    >
      <div class="form-group">
        <label>Name</label>
        <input
          name="name"
          [(ngModel)]="product.name"
          type="text"
          class="form-control"
          pattern="^[A-Z0-9]+[A-Za-z0-9 ,':-()]{4,35}$"
          required
        />
        <div
          *ngIf="productEditorForm.controls['name']?.invalid"
          class="error-message"
        >
          Name must start with capital letter or number and must be between 4
          and 35 characters long!
        </div>
      </div>

      <div class="form-group">
        <label>Type</label>
        <select
          name="type"
          [(ngModel)]="product.type"
          type="select"
          class="form-control"
        >
          <option value="documentary">Documentary</option>
          <option value="comedy">Comedy</option>
          <option value="adventure">Adventure</option>
        </select>
      </div>

      <div class="form-group">
        <label>Description</label>
        <textarea
          name="description"
          [(ngModel)]="product.description"
          class="form-control"
          cols="15"
          rows="4"
          pattern="^[A-Ű][A-Űa-Ű ':.0-9]{4,50}$"
          required
        >
        </textarea>
        <div
          *ngIf="productEditorForm.controls['description']?.invalid"
          class="error-message"
        >
          Description must start with capital letter and must be between 4 and
          50 characters long!
        </div>
      </div>

      <div class="form-group">
        <label>Price</label>
        <input
          name="price"
          [(ngModel)]="product.price"
          type="text"
          class="form-control"
          pattern="[2-5]"
          required
        />
        <div
          *ngIf="productEditorForm.controls['price']?.invalid"
          class="error-message"
        >
          Price must be a number between 2 and 5!
        </div>
      </div>

      <div class="form-group">
        <label>Featured</label>
        <select
          name="featured"
          [(ngModel)]="product.featured"
          type="select"
          class="form-control"
        >
          <option value="true">Active</option>
          <option value="false">Inactive</option>
        </select>
      </div>

      <div class="form-group">
        <label>Active</label>
        <select
          name="active"
          [(ngModel)]="product.active"
          type="select"
          class="form-control"
        >
          <option value="true">Active</option>
          <option value="false">Inactive</option>
        </select>
      </div>

      <div class="d-grid gap-2">
        <button
          [disabled]="productEditorForm.invalid"
          class="btn btn-primary mt-3"
          type="submit"
        >
          <i class="fa fa-save"></i> Update Product
        </button>
      </div>
    </form>
  </div>
</div>
